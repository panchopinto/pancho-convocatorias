<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Pancho Pinto ‚Äî Convocatorias</title>
  <meta name="description" content="Perfil y m√©tricas ‚Äî EdTech inclusiva: IoT, VR/AR, impresi√≥n 3D.">
  <style>
    :root { --bg:#0b1020; --card:#141b2d; --txt:#e6eaf3; --muted:#aab3c5; --acc:#6ee7b7; }
    * { box-sizing: border-box; }
    body { margin:0; font-family: system-ui, Segoe UI, Roboto; background:var(--bg); color:var(--txt); }
    .wrap { max-width: 1024px; margin: 0 auto; padding: 2rem 1.25rem; }
    .grid { display:grid; gap:1rem; grid-template-columns: 1fr; }
    @media(min-width: 900px) { .grid { grid-template-columns: 1.2fr .8fr; } }
    .card { background:var(--card); border-radius: 18px; padding: 1.5rem; box-shadow: 0 10px 30px #0006; }
    h1,h2 { margin:0 0 .6rem; }
    p { color: var(--muted); line-height: 1.6; }
    .badges { display:flex; flex-wrap:wrap; gap:.5rem; margin: .75rem 0 0; }
    .badge { background:#1f2740; color:#cfe6ff; padding:.35rem .6rem; border-radius:999px; font-size:.85rem; border:1px solid #2a3558; }
    .actions { display:flex; gap:.6rem; margin-top:1rem; flex-wrap:wrap; }
    .btn { background:linear-gradient(135deg, #22c55e, #16a34a); color:#07120b; border:none; border-radius:14px; padding:.7rem 1rem; font-weight:700; text-decoration:none; display:inline-block; }
    .btn.outline { background:transparent; color:var(--acc); border:1px solid #256e54; }
    .metric-badges span { display:inline-block; margin:.25rem .4rem .25rem 0; padding:.3rem .55rem; border-radius:10px; background:#223; border:1px solid #2a3558; color:#cfe6ff; font-size:.85rem; }
    svg { width:100%; height:280px; background:#0f1630; border-radius:12px; }
    footer { opacity:.7; font-size:.85rem; margin-top:1rem; }
  </style>
</head>
<body>
  <main class="wrap">
    <div class="grid">
      <section class="card">
        <h1>Pancho Pinto ‚Äî Perfil para Convocatorias</h1>
        <p>Ingeniero en Inform√°tica y docente en √ëuble (Chile). EdTech inclusiva con IoT (ESP32), VR/AR e impresi√≥n 3D: SIAMP, hidro/acuapon√≠a y √≥rtesis 3D.</p>
        <div class="badges">
          <span class="badge">Inclusi√≥n ¬∑ PIE</span>
          <span class="badge">IoT ¬∑ ESP32</span>
          <span class="badge">VR/AR</span>
          <span class="badge">3D printing</span>
          <span class="badge">Transferencia</span>
        </div>
        <div class="actions">
          <a class="btn" href="mailto:franciscoandresp@gmail.com">‚úâÔ∏è Escribir</a>
          <a class="btn outline" href="tel:+56920027992">üìû Llamar</a>
          <a class="btn outline" href="../docs/executive_summary.md">üìÑ Resumen</a>
          <a class="btn outline" href="../docs/executive_summary.pdf">üñ®Ô∏è PDF (auto)</a>
          <a class="btn outline" href="./contact.html">üìù Contacto</a>
        </div>
        <footer>‚ÄúTecnolog√≠a con prop√≥sito: aprender, incluir y transformar.‚Äù</footer>
      </section>
      <aside class="card">
        <h2>M√©tricas</h2>
        <div id="metric-badges" class="metric-badges"></div>
        <svg id="chart" viewBox="0 0 600 240" preserveAspectRatio="xMidYMid meet"></svg>
      </aside>
    </div>
  </main>
<script>
async function loadMetrics() {
  try {
    const res = await fetch('../docs/metrics.json', {cache: 'no-store'});
    const data = await res.json();
    const cont = document.getElementById('metric-badges');
    cont.innerHTML = '';
    data.indicadores.forEach(m => {
      const span = document.createElement('span');
      span.textContent = `${m.nombre}: ${m.valor}`;
      cont.appendChild(span);
    });
    drawChart(data.indicadores);
  } catch (e) {
    console.error('No se pudieron cargar m√©tricas', e);
  }
}
function drawChart(items) {
  const svg = document.getElementById('chart');
  const max = Math.max(...items.map(i => i.valor), 1);
  const w = 600, h = 240, pad = 40;
  const barW = (w - pad*2) / items.length - 10;
  svg.innerHTML = `<rect x="0" y="0" width="600" height="240" fill="#0f1630"/>`;
  // axes
  svg.innerHTML += `<line x1="${pad}" y1="${h-pad}" x2="${w-pad}" y2="${h-pad}" stroke="#445"/>`;
  svg.innerHTML += `<line x1="${pad}" y1="${pad}" x2="${pad}" y2="${h-pad}" stroke="#445"/>`;
  items.forEach((it, idx) => {
    const x = pad + 10 + idx*((w-pad*2)/items.length);
    const bh = (it.valor / max) * (h - pad*2 - 10);
    const y = (h - pad) - bh;
    svg.innerHTML += `<rect x="${x}" y="${y}" width="${barW}" height="${bh}" fill="#22c55e"/>`;
    svg.innerHTML += `<text x="${x + barW/2}" y="${h - pad + 16}" fill="#aab3c5" font-size="10" text-anchor="middle">${it.nombre.substring(0,10)}‚Ä¶</text>`;
    svg.innerHTML += `<text x="${x + barW/2}" y="${y - 4}" fill="#e6eaf3" font-size="12" text-anchor="middle">${it.valor}</text>`;
  });
}
loadMetrics();
</script>
</body>
</html>
